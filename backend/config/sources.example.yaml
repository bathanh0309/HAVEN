# HAVEN Multi-Camera Configuration Template
# Copy to sources.yaml and customize for your setup

general:
  fps_limit: 30
  resize_width: 640
  log_level: INFO
  output_dir: "/mnt/user-data/outputs"

cameras:
  # Example: Local video file
  - id: cam1
    name: "Camera 1"
    type: video
    source: "/path/to/your/video1.mp4"
    enabled: true
  
  # Example: RTSP stream (disabled by default)
  - id: cam2
    name: "Camera 2 (RTSP)"
    type: rtsp
    source: "${RTSP_CAM2_URL}"
    username: "${RTSP_USERNAME}"
    password: "${RTSP_PASSWORD}"
    enabled: false

inference:
  yolo:
    model: "yolov11n.pt"
    conf_threshold: 0.5
    device: "cuda"
  
  pose:
    enabled: true
    model: "yolov11n-pose.pt"
    conf_threshold: 0.3
  
  tracker:
    type: "bytetrack"
    persist: true

reid:
  enabled: true
  
  face:
    enabled: true
    model: "buffalo_l"
    quality_threshold: 0.7
  
  gait:
    enabled: true
    sequence_length: 15
  
  appearance:
    enabled: false
  
  thresholds:
    face_similarity: 0.6
    gait_similarity: 0.7
    appearance_similarity: 0.5
    unknown_threshold: 0.4
  
  multi_prototype:
    memory_size: 10
    ema_alpha: 0.3
    embedding_ttl: 3600
  
  quality:
    min_bbox_size: 80
    max_blur_variance: 100
    min_tracklet_frames: 5

storage:
  db_path: "/home/claude/haven_reid.db"
  save_snapshots: true
  snapshot_dir: "/mnt/user-data/outputs/snapshots"

api:
  websocket:
    enabled: true
    host: "0.0.0.0"
    port: 8765

