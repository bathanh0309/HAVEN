<mxfile host="65bd71144e">
    <diagram id="haven-arch" name="HAVEN - Smart Home AI Camera">
        <mxGraphModel dx="402" dy="504" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2400" pageHeight="1300" background="#ffffff" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title" value="ðŸ ðŸ“¹ HAVEN - Smart Home AI Camera Security &amp; ADL Monitoring" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=26;fontStyle=1;fontColor=#1a237e;" parent="1" vertex="1">
                    <mxGeometry x="400" y="20" width="1400" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="input-layer" value="ðŸ“¹ VIDEO INPUT" style="swimlane;horizontal=1;startSize=30;fillColor=#fce4ec;strokeColor=#c2185b;strokeWidth=2;rounded=1;fontSize=14;fontStyle=1;fontColor=#c2185b;" parent="1" vertex="1">
                    <mxGeometry x="445" y="96" width="310" height="286" as="geometry"/>
                </mxCell>
                <mxCell id="cam-a" value="ðŸ“¹ Cam A â€“ Gate (Outdoor RTSP)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc80;strokeColor=#e65100;strokeWidth=2;fontSize=13;fontStyle=1;fontColor=#000000;" parent="input-layer" vertex="1">
                    <mxGeometry x="45" y="52" width="220" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="cam-b" value="ðŸ“¹ Cam B â€“ Indoor Living (RTSP)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc80;strokeColor=#e65100;strokeWidth=2;fontSize=13;fontStyle=1;fontColor=#000000;labelBackgroundColor=none;" parent="input-layer" vertex="1">
                    <mxGeometry x="45" y="132" width="220" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="cam-c" value="ðŸ“¹ Cam C â€“ Indoor Room (RTSP)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc80;strokeColor=#e65100;strokeWidth=2;fontSize=13;fontStyle=1;fontColor=#000000;" parent="input-layer" vertex="1">
                    <mxGeometry x="45" y="212" width="220" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="frontend-layer" value="ðŸ–¥ï¸ FRONTEND DASHBOARD" style="swimlane;horizontal=1;startSize=32;fillColor=#fff9e6;strokeColor=#f57c00;strokeWidth=2;rounded=1;fontSize=14;fontStyle=1;fontColor=#e65100;" parent="1" vertex="1">
                    <mxGeometry x="1200" y="94" width="571" height="286" as="geometry"/>
                </mxCell>
                <mxCell id="parent-dashboard" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#f57c00;strokeWidth=2;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="47" y="49" width="220" height="224" as="geometry"/>
                </mxCell>
                <mxCell id="parent-icon" value="ðŸ‘¨â€ðŸ‘©â€ðŸ‘§" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=32;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="47" y="54" width="56" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="parent-title" value="PARENT&#10;ðŸ” Login admin + (pw=123)" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=13;fontStyle=1;fontColor=#e65100;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="82" y="56" width="180" height="37" as="geometry"/>
                </mxCell>
                <mxCell id="parent-live" value="ðŸ“¹ Live View" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc80;strokeColor=#f57c00;fontSize=12;fontColor=#000000;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="57" y="103" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="parent-events" value="ðŸ“‹ ADL Events" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc80;strokeColor=#f57c00;fontSize=12;fontColor=#000000;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="57" y="143" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="parent-heatmap" value="ðŸ—ºï¸ Heatmap &amp; Trajectory" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc80;strokeColor=#f57c00;fontSize=12;fontColor=#000000;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="57" y="183" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="parent-telegram" value="ðŸ“± Telegram Alerts" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1bee7;strokeColor=#7b1fa2;fontSize=11;fontColor=#000000;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="87" y="223" width="140" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="expert-dashboard" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e9;strokeColor=#388e3c;strokeWidth=2;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="297" y="49" width="230" height="224" as="geometry"/>
                </mxCell>
                <mxCell id="expert-icon" value="ðŸ”¬" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=32;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="297" y="54" width="58" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="expert-title" value="EXPERT&#10;ðŸ” Login admin + (pw=456)" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=13;fontStyle=1;fontColor=#388e3c;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="335" y="59" width="190" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="expert-analytics" value="ðŸ“Š Analytics Dashboard" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a5d6a7;strokeColor=#388e3c;fontSize=12;fontColor=#000000;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="307" y="103" width="210" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="expert-dataset" value="ðŸ·ï¸ Data Labeling" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a5d6a7;strokeColor=#388e3c;fontSize=12;fontColor=#000000;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="307" y="143" width="210" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="expert-config" value="âš™ï¸ System Config" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a5d6a7;strokeColor=#388e3c;fontSize=12;fontColor=#000000;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="307" y="183" width="210" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="expert-metrics" value="ðŸ“ˆ Model Metrics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a5d6a7;strokeColor=#388e3c;fontSize=12;fontColor=#000000;" parent="frontend-layer" vertex="1">
                    <mxGeometry x="307" y="223" width="210" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="server-layer" value="âš™ï¸ SERVER BACKEND (FastAPI)" style="swimlane;horizontal=1;startSize=32;fillColor=#e3f2fd;strokeColor=#1565c0;strokeWidth=2;rounded=1;fontSize=14;fontStyle=1;fontColor=#1565c0;" parent="1" vertex="1">
                    <mxGeometry x="1200" y="445" width="638" height="542" as="geometry"/>
                </mxCell>
                <mxCell id="edge-ingest" value="(14) ðŸ“¥ Edge Ingest API&#10;(FastAPI /ingest)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1565c0;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="server-layer" vertex="1">
                    <mxGeometry x="30" y="55" width="166" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="event-normalizer" value="(15) ðŸ”„ Event Normalizer&#10;(parse, validate, enrich)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90caf9;strokeColor=#1565c0;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="server-layer" vertex="1">
                    <mxGeometry x="30" y="135" width="166" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="person-registry" value="(16) ðŸ‘¥ Person Registry + ID Mapping&#10;â€¢ map track_id â†’ person_id&#10;â€¢ link CamA identity to CamB/C" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#64b5f6;strokeColor=#1565c0;strokeWidth=2;fontSize=10;fontStyle=0;fontColor=#000000;align=left;spacingLeft=8;verticalAlign=top;spacingTop=5;" parent="server-layer" vertex="1">
                    <mxGeometry x="17.5" y="244" width="191" height="75" as="geometry"/>
                </mxCell>
                <mxCell id="media-extractor" value="(17) ðŸ“· Media Extractor&#10;(snapshot/clip from stream)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#42a5f5;strokeColor=#1565c0;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="server-layer" vertex="1">
                    <mxGeometry x="28" y="329" width="171" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="postgresql" value="(18) ðŸ—„ï¸ PostgreSQL&#10;(events, persons, zones)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#f8bbd0;strokeColor=#c2185b;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="server-layer" vertex="1">
                    <mxGeometry x="215" y="314" width="180" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="analytics-agg" value="(20) ðŸ“Š Analytics Aggregator&#10;(stats, heatmap, trajectory)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe0b2;strokeColor=#f57c00;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="server-layer" vertex="1">
                    <mxGeometry x="215" y="455" width="185" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="api-ws-group" value="(21) ðŸŒ API + WebSocket" style="swimlane;fillColor=#e0f2f1;strokeColor=#00695c;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#00695c;rounded=1;" parent="server-layer" vertex="1">
                    <mxGeometry x="221" y="55" width="310" height="85" as="geometry"/>
                </mxCell>
                <mxCell id="rest-api-box" value="REST API&#10;(/login,/events,/stats)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00695c;fontSize=10;fontColor=#000000;" parent="api-ws-group" vertex="1">
                    <mxGeometry x="10" y="30" width="140" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="websocket-box" value="WebSocket&#10;(/live,/alerts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#80cbc4;strokeColor=#00695c;fontSize=10;fontColor=#000000;" parent="api-ws-group" vertex="1">
                    <mxGeometry x="160" y="30" width="140" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="dashboard-service" value="(23) ðŸ–¥ï¸ Dashboard Service&#10;(Streamlit - primary)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="server-layer" vertex="1">
                    <mxGeometry x="437" y="220" width="182" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="srv-arr-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1565c0;endArrow=block;endFill=1;" parent="server-layer" source="edge-ingest" target="event-normalizer" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="srv-arr-1-label" value="raw_event" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="srv-arr-1" vertex="1" connectable="0">
                    <mxGeometry x="-0.1" relative="1" as="geometry">
                        <mxPoint y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="srv-arr-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1565c0;endArrow=block;endFill=1;" parent="server-layer" source="event-normalizer" target="person-registry" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="srv-arr-2-label" value="normalized_event" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="srv-arr-2" connectable="0" vertex="1">
                    <mxGeometry x="-0.1" relative="1" as="geometry">
                        <mxPoint y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="srv-arr-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1565c0;endArrow=block;endFill=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;" parent="server-layer" source="person-registry" target="postgresql" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="305" y="263"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="srv-arr-3-label" value="event_record + person_id" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="srv-arr-3" connectable="0" vertex="1">
                    <mxGeometry x="0.2" relative="1" as="geometry">
                        <mxPoint x="-10" y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="srv-arr-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1565c0;endArrow=block;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" parent="server-layer" source="postgresql" target="analytics-agg" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="305" y="446"/>
                            <mxPoint x="305" y="446"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="srv-arr-5-label" value="historical events" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="srv-arr-5" connectable="0" vertex="1">
                    <mxGeometry x="-0.1" relative="1" as="geometry">
                        <mxPoint y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="srv-arr-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1565c0;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="server-layer" source="analytics-agg" target="api-ws-group" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="421" y="490"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="srv-arr-6-label" value="stats/heatmap datasets" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="srv-arr-6" connectable="0" vertex="1">
                    <mxGeometry x="0.1" relative="1" as="geometry">
                        <mxPoint x="10" y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="srv-arr-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00695c;endArrow=block;endFill=1;" parent="server-layer" source="api-ws-group" target="dashboard-service" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="467" y="181"/>
                            <mxPoint x="467" y="181"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="srv-arr-7-label" value="REST/WS responses" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="srv-arr-7" connectable="0" vertex="1">
                    <mxGeometry x="-0.1" relative="1" as="geometry">
                        <mxPoint y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="telegram-notifier" value="(22) ðŸ“± Telegram Notifier&#10;(Parent + Expert alerts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1bee7;strokeColor=#7b1fa2;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="server-layer" vertex="1">
                    <mxGeometry x="221" y="165" width="163" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="minio" value="(19) ðŸ“¦ MinIO&#10;(images, videos, clips)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#ffcdd2;strokeColor=#c62828;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="server-layer" vertex="1">
                    <mxGeometry x="30" y="440" width="160" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="srv-arr-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#c62828;endArrow=block;endFill=1;" parent="server-layer" source="media-extractor" target="minio" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="113" y="402"/>
                            <mxPoint x="113" y="402"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="srv-arr-4-label" value="snapshot/clip bytes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="srv-arr-4" connectable="0" vertex="1">
                    <mxGeometry x="-0.1" relative="1" as="geometry">
                        <mxPoint y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="global-arr-1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;strokeColor=#c2185b;endArrow=block;endFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="input-layer" target="edge-layer" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="global-arr-1-label" value="(1) RTSP Streams" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=13;fontStyle=1;fontColor=#c2185b;labelBackgroundColor=none;" parent="global-arr-1" vertex="1" connectable="0">
                    <mxGeometry x="-0.1" relative="1" as="geometry">
                        <mxPoint x="60" y="-12" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="global-arr-2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;strokeColor=#2e7d32;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="module-b-group" target="server-layer" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1140" y="740"/>
                            <mxPoint x="1140" y="716"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="global-arr-3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;strokeColor=#1565c0;endArrow=block;endFill=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="server-layer" target="frontend-layer" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1517" y="445"/>
                            <mxPoint x="1517" y="420"/>
                            <mxPoint x="1486" y="420"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="global-arr-3-label" value="REST + WebSocket:&#10;live/events/heatmap/stats" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=12;fontStyle=1;fontColor=#1565c0;labelBackgroundColor=none;" parent="global-arr-3" connectable="0" vertex="1">
                    <mxGeometry x="0.1" relative="1" as="geometry">
                        <mxPoint x="111" y="-12" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="edge-layer" value="ðŸ–¥ï¸ EDGE AI (Local Processing)" style="swimlane;horizontal=1;startSize=32;fillColor=#e8f5e9;strokeColor=#2e7d32;strokeWidth=2;rounded=1;fontSize=14;fontStyle=1;fontColor=#2e7d32;" parent="1" vertex="1">
                    <mxGeometry x="190" y="439" width="950" height="564" as="geometry"/>
                </mxCell>
                <mxCell id="module-a-group" value="MODULE A â€“ Security + Ident (Huy)" style="swimlane;horizontal=1;startSize=28;fillColor=#fff3e0;strokeColor=#fb8c00;strokeWidth=2;rounded=1;fontSize=12;fontStyle=1;fontColor=#fb8c00;" parent="edge-layer" vertex="1">
                    <mxGeometry x="38" y="50" width="429" height="499" as="geometry"/>
                </mxCell>
                <mxCell id="rtsp-ab" value="(2) ðŸ“¸ RTSP Capture&amp;nbsp;&lt;br&gt;â€¢ 2.1 CamA Reader&lt;br&gt;â€¢ 2.2 CamB Reader" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe0b2;strokeColor=#f57c00;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;align=left;spacingLeft=8;" parent="module-a-group" vertex="1">
                    <mxGeometry x="27" y="48" width="151" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="person-detect-a" value="(3) ðŸŽ¯ Person Detect&#10;(YOLOv8)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc80;strokeColor=#f57c00;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="module-a-group" vertex="1">
                    <mxGeometry x="261" y="53" width="150" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="faceid" value="(4) ðŸ‘¤ FaceID&#10;(InsightFace)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffb74d;strokeColor=#f57c00;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="module-a-group" vertex="1">
                    <mxGeometry x="27" y="155" width="150" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="tracking-reid" value="(5) ðŸ”„ Tracking/ReID&#10;(DeepSORT + OSNet)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#f57c00;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="module-a-group" vertex="1">
                    <mxGeometry x="261" y="155" width="152" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="security-rules" value="&lt;br&gt;&lt;span style=&quot;color: rgb(46, 125, 50); font-size: 11px; font-weight: 700; text-align: center;&quot;&gt;(6)&amp;nbsp;&lt;/span&gt;ðŸ›¡ï¸&lt;span style=&quot;color: rgb(46, 125, 50); font-size: 11px; font-weight: 700; text-align: center;&quot;&gt;&amp;nbsp;Security Rules + Actuation&lt;/span&gt;&lt;br&gt;â€¢ 6.1 Forbidden Zone/Intrusion (CamA/B)&lt;br&gt;â€¢ 6.2 Unknown â†’ Snapshot + Telegram + Light ON&lt;br&gt;â€¢ 6.3 Known â†’ Wait 10s â†’ Unlock Gate&lt;br&gt;â€¢ 6.4 Light Control (intruder alert)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe0b2;strokeColor=#f57c00;strokeWidth=2;fontSize=10;fontStyle=0;fontColor=#000000;align=left;spacingLeft=10;verticalAlign=top;spacingTop=8;" parent="module-a-group" vertex="1">
                    <mxGeometry x="70" y="245" width="312" height="98" as="geometry"/>
                </mxCell>
                <mxCell id="actuators" value="(7) âš¡ Actuators&#10;â€¢ ðŸ”“ Smartlock/Relay&#10;â€¢ ðŸ’¡ Smart Light" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffccbc;strokeColor=#f57c00;strokeWidth=2;fontSize=11;fontStyle=0;fontColor=#000000;align=left;spacingLeft=10;verticalAlign=top;spacingTop=8;" parent="module-a-group" vertex="1">
                    <mxGeometry x="122" y="396" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="arr-a1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#f57c00;endArrow=block;endFill=1;" parent="module-a-group" source="rtsp-ab" target="person-detect-a" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arr-a1-label" value="&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;Frame (RGB)&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="arr-a1" vertex="1" connectable="0">
                    <mxGeometry x="-0.2" relative="1" as="geometry">
                        <mxPoint x="4" y="-11" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arr-a2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#f57c00;endArrow=block;endFill=1;" parent="module-a-group" source="person-detect-a" target="faceid" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="336" y="120"/>
                            <mxPoint x="102" y="120"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arr-a2-label" value="&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;bbox + crop&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="arr-a2" vertex="1" connectable="0">
                    <mxGeometry x="-0.2" relative="1" as="geometry">
                        <mxPoint x="-24" y="-8" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arr-a3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#f57c00;endArrow=block;endFill=1;" parent="module-a-group" source="faceid" target="tracking-reid" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arr-a3-label" value="&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;name/unknown&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="arr-a3" vertex="1" connectable="0">
                    <mxGeometry x="-0.2" relative="1" as="geometry">
                        <mxPoint x="6" y="-11" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arr-a4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#f57c00;endArrow=block;endFill=1;" parent="module-a-group" source="tracking-reid" target="security-rules" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arr-a4-label" value="track_id + id + traj" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="arr-a4" vertex="1" connectable="0">
                    <mxGeometry x="-0.2" relative="1" as="geometry">
                        <mxPoint x="-47" y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="module-b-group" value="MODULE B â€“ ADL Recognition (ThÃ nh)" style="swimlane;horizontal=1;startSize=28;fillColor=#e8f5e9;strokeColor=#2e7d32;strokeWidth=2;rounded=1;fontSize=12;fontStyle=1;fontColor=#2e7d32;" parent="edge-layer" vertex="1">
                    <mxGeometry x="486" y="50" width="457" height="502" as="geometry"/>
                </mxCell>
                <mxCell id="rtsp-bc" value="(8) ðŸ“¸ RTSP Capture&lt;br&gt;â€¢ 8.1 CamB Reader&lt;br&gt;â€¢ 8.2 CamC Reader" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;align=left;spacingLeft=8;" parent="module-b-group" vertex="1">
                    <mxGeometry x="30" y="48" width="130" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="person-detect-b" value="(9) ðŸŽ¯ Person Detect&lt;br&gt;(YOLOv11)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#81c784;strokeColor=#2e7d32;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#000000;" parent="module-b-group" vertex="1">
                    <mxGeometry x="280" y="53" width="150" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="tracking-b" value="(10) ðŸ”„ Tracking&#10;(ByteTrack)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66bb6a;strokeColor=#2e7d32;strokeWidth=2;fontSize=10;fontStyle=1;fontColor=#000000;align=center;" parent="module-b-group" vertex="1">
                    <mxGeometry x="30" y="154" width="132" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="pose-est" value="(11) ðŸ¦´ Pose Estimation&lt;br&gt;(YOLOv11-Pose)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4caf50;strokeColor=#2e7d32;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#ffffff;" parent="module-b-group" vertex="1">
                    <mxGeometry x="280" y="154" width="150" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="adl-recognition" value="(12) ðŸ§  ADL Recognition (Action Recognition)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#2e7d32;align=center;verticalAlign=top;" parent="module-b-group" vertex="1">
                    <mxGeometry x="33" y="245" width="352" height="118" as="geometry"/>
                </mxCell>
                <mxCell id="adl-12-1" value="12.1 Preprocess" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a5d6a7;strokeColor=#2e7d32;fontSize=9;fontColor=#000000;" parent="module-b-group" vertex="1">
                    <mxGeometry x="48" y="275" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="adl-12-2" value="12.2 Graph" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#81c784;strokeColor=#2e7d32;fontSize=9;fontColor=#000000;" parent="module-b-group" vertex="1">
                    <mxGeometry x="163" y="275" width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="adl-12-3" value="12.3 Window" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66bb6a;strokeColor=#2e7d32;fontSize=9;fontColor=#000000;" parent="module-b-group" vertex="1">
                    <mxGeometry x="268" y="275" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="adl-12-4" value="12.4 ST-GCN" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4caf50;strokeColor=#2e7d32;fontSize=9;fontColor=#ffffff;" parent="module-b-group" vertex="1">
                    <mxGeometry x="48" y="315" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="adl-12-5" value="12.5 Smooth" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#43a047;strokeColor=#2e7d32;fontSize=9;fontColor=#ffffff;" parent="module-b-group" vertex="1">
                    <mxGeometry x="163" y="315" width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="adl-12-6" value="12.6 Event Mapper" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#388e3c;strokeColor=#2e7d32;fontSize=9;fontColor=#ffffff;" parent="module-b-group" vertex="1">
                    <mxGeometry x="268" y="315" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="arr-b1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2e7d32;endArrow=block;endFill=1;" parent="module-b-group" source="rtsp-bc" target="person-detect-b" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arr-b1-label" value="Frame (RGB)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="arr-b1" vertex="1" connectable="0">
                    <mxGeometry x="-0.2" relative="1" as="geometry">
                        <mxPoint x="9" y="-8" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arr-adl-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;endFill=1;strokeWidth=1;strokeColor=#2e7d32;" parent="module-b-group" source="adl-12-1" target="adl-12-2" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arr-b2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2e7d32;endArrow=block;endFill=1;" parent="module-b-group" source="person-detect-b" target="tracking-b" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="306" y="124"/>
                            <mxPoint x="98" y="124"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arr-b2-label" value="bbox+cls+conf" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="arr-b2" vertex="1" connectable="0">
                    <mxGeometry x="-0.2" relative="1" as="geometry">
                        <mxPoint x="-6" y="-7" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arr-adl-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;endFill=1;strokeWidth=1;strokeColor=#2e7d32;" parent="module-b-group" source="adl-12-2" target="adl-12-3" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arr-b3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2e7d32;endArrow=block;endFill=1;" parent="module-b-group" source="tracking-b" target="pose-est" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arr-b3-label" value="track_id+bbox" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="arr-b3" vertex="1" connectable="0">
                    <mxGeometry x="-0.2" relative="1" as="geometry">
                        <mxPoint x="9" y="-10" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arr-adl-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;endFill=1;strokeWidth=1;strokeColor=#2e7d32;entryX=0.5;entryY=0;exitX=0.5;exitY=1;" parent="module-b-group" source="adl-12-2" target="adl-12-5" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="208" y="310"/>
                            <mxPoint x="208" y="310"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arr-b4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2e7d32;endArrow=block;endFill=1;" parent="module-b-group" source="pose-est" target="adl-recognition" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arr-b4-label" value="keypoints" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="arr-b4" vertex="1" connectable="0">
                    <mxGeometry x="-0.2" relative="1" as="geometry">
                        <mxPoint x="-68" y="-8" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="adl-safety-rules" value="(13) ðŸŽ¯ ADL + Safety Rules&#10;â€¢ ðŸ‘¶ Child: Forbidden zone priority&#10;â€¢ ðŸ‘´ Elderly: Fall/Stroke priority&#10;â€¢ ðŸš¨ Intruder: from Module A (dashed)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9e6;strokeColor=#2e7d32;strokeWidth=2;fontSize=10;fontStyle=0;fontColor=#333;align=left;spacingLeft=10;verticalAlign=top;spacingTop=8;" parent="module-b-group" vertex="1">
                    <mxGeometry x="109" y="408" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="arr-b5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2e7d32;endArrow=block;endFill=1;" parent="module-b-group" source="adl-recognition" target="adl-safety-rules" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arr-b5-label" value="action+prob" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#333;labelBackgroundColor=none;" parent="arr-b5" vertex="1" connectable="0">
                    <mxGeometry x="-0.2" relative="1" as="geometry">
                        <mxPoint x="27" y="-1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arr-cross-ab" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#999;dashed=1;dashPattern=5 5;endArrow=block;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="edge-layer" source="tracking-reid" target="tracking-b" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arr-cross-label" value="person_id" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=9;fontColor=#666;fontStyle=2;labelBackgroundColor=none;" parent="arr-cross-ab" vertex="1" connectable="0">
                    <mxGeometry x="0.1" relative="1" as="geometry">
                        <mxPoint x="-12" y="-11" as="offset"/>
                    </mxGeometry>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>